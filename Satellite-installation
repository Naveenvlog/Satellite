**Red Hat Satellite 6.13.1** 

**Installation**

**Documentation**

                         ****


#                                 -- Tanveer Alam Qasmi

\



## This Document includes all the steps performed for the setup.

Satellite VM Creation Steps:


# 1. Create Logical Volume (LVM):

\# Create an LVM named "satellite" with a size of +600GB under the "rhel" volume group.

|                                           |
| ----------------------------------------- |
| **#lvcreate -L +600GB -n satellite rhel** |


# 2. Download the RHEL 8.7 Image:

Obtain the rhel-8.7-x86\_64-kvm.qcow2 image from the official Red Hat website.


# 3. Prepare the Image Directory:

\# Create a directory to store VM images.

|                         |
| ----------------------- |
| **#mkdir /VM\_IMAGES/** |

\# Copy the downloaded image to the new directory and rename it for clarity.

|                                                                |
| -------------------------------------------------------------- |
| **#cp rhel-8.7-x86\_64-kvm.qcow2 /VM\_IMAGES/satellite.qcow2** |

\



# 4. Customize and Create the VM:

\# Set root password and uninstall the cloud-init package.

\
\


|                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------ |
| **#virt-customize -a /VM\_IMAGES/satellite.qcow2 --root-password password:Redhat\@123Linux\@123 --uninstall cloud-init** |

\# Initialize the VM with the given resources and configurations.

\


|                                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **#virt-install --name=satellite --memory=32768 --vcpu=8 --disk /VM\_IMAGES/satellite.qcow2 --os-variant=rhel8.7 --import --network network=default,model=virtio** |

\



# 5. Attach the Disk to VM:

\# Attach the LVM disk to the VM.

\


|                                                                           |
| ------------------------------------------------------------------------- |
| **#virsh attach-disk satellite /dev/rhel/satellite vda --live --config**  |


# 6. Attach the Network Interface:

\# List available networks.

\


|                                                                                                                                                                                                                                                     |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **#virsh net list**# Expected output:# Name                 State      Autostart  Persistent# -----------------------------------------------------# bridged-network      active     yes        yes# default              active     yes        yes |

\# Attach the "bridged-network" to the satellite VM.

\


|                                                                                              |
| -------------------------------------------------------------------------------------------- |
| **#virsh attach-interface satellite network bridged-network --model virtio --config --live** |


# 7. Access the VM Console:

\# Access the console of the satellite VM.

|                                                                          |
| ------------------------------------------------------------------------ |
| **#virsh console satellite**## # Follow the on-screen prompts to log in. |

\# Follow the on-screen prompts to log in.


# 8. Configuring interface.

\# Create a new file, write the below content and restart the Network Manager service.

|                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **# vim /etc/sysconfig/network-scripts/ifcfg-eth1****DEVICE=eth1****IPADDR=192.168.197.61****GATEWAY=192.168.197.1****NETMASK=255.255.255.0****ONBOOT=yes****TYPE=Ethernet****PROXY\_METHOD=none****BROWSER\_ONLY=no****PREFIX=24****DEFROUTE=yes****IPV4\_FAILURE\_FATAL=no****IPV6INIT=no****IPV6\_DEFROUTE=yes****IPV6\_FAILURE\_FATAL=no****NAME="System eth1"****BOOTPROTO=none** **# systemctl restart NetworkManager** |

\
\
\


Setting Up an HTTP Repository Server to Serve RHEL Packages


# Objective

To create an HTTP repository server, allowing client machines to download and install Red Hat Enterprise Linux packages using reposync.


# Prerequisites

1. A Red Hat Enterprise Linux (RHEL) system.

2. Proper RHEL subscription attached to the machine.


## Procedure

# 1.Setting Up the Hostname and Registering with Subscription Manager:

|                                                                                                                                   |
| --------------------------------------------------------------------------------------------------------------------------------- |
| **#** subscription-manager register## # hostnamectl set-hostname reposerver## # subscription-manager refresh## # yum check-update |


# 2. Enabling Repositories for Download:

\# Enable desired repositories which you want to sync to your local server.

|                                              |
| -------------------------------------------- |
| ## # subscription-manager repos --list rgdgd |

\# Enable any other repositories as needed

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ## # subscription-manager repos --enable ansible-2-for-rhel-8-x86\_64-rpms## # subscription-manager repos --enable satellite-capsule-6.13-for-rhel-8-x86\_64-rpms## # subscription-manager repos --enable satellite-6.13-for-rhel-8-x86\_64-rpms## # subscription-manager repos --enable satellite-client-6-for-rhel-8-x86\_64-rpms## # subscription-manager repos --enable satellite-maintenance-6.13-for-rhel-8-x86\_64-rpms## # subscription-manager repos --enable satellite-utils-6.13-for-rhel-8-x86\_64-rpms## # subscription-manager repos --enable satellite-server-6.13-for-rhel-8-x86\_64-rpms |


# 3. Install Required Packages:

Install yum-utils which provides reposync, and httpd for setting up the web server.

\


|                                      |
| ------------------------------------ |
| ## # **yum install yum-utils httpd** |


# 4. Setting up Reposync:

We use the reposync command to synchronize a remote repository to a directory on the local machine. Set the path where you want to download the repositories. For example:

\


|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=ansible-2-for-rhel-8-x86\_64-rpms****# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=satellite-utils-6.13-for-rhel-8-x86\_64-rpms**   **# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=satellite-maintenance-6.13-for-rhel-8-x86\_64-rpms****# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=satellite-client-6-for-rhel-8-x86\_64-rpms****# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=satellite-capsule-6.13-for-rhel-8-x86\_64-rpms** **# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=satellite-6.13-for-rhel-8-x86\_64-rpms** **# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=rhel-8-for-x86\_64-baseos-rpms** **# reposync -p /home/nic/repodata/8.7 --download-metadata --repoid=rhel-8-for-x86\_64-appstream-rpm** |


# 5. Configuring and Starting HTTPD:

Make sure the downloaded repository has the correct permissions:

\


|                                                                                                             |
| ----------------------------------------------------------------------------------------------------------- |
| ## # **chown -R apache:apache /var/www/html/8.7****# chcon -R -t httpd\_sys\_content\_t /var/www/html/8.7** |

Modify the HTTPD configuration if necessary. The default configuration should work, but if needed:

\


|                                     |
| ----------------------------------- |
| ## # vim /etc/httpd/conf/httpd.conf |


## Start and enable httpd:

\


|                                      |
| ------------------------------------ |
| ## #**systemctl enable --now httpd** |


# 6. Setting Up Firewall Rules:

## Allow httpd through the firewall:

\


|                                                                                                                                  |
| -------------------------------------------------------------------------------------------------------------------------------- |
| ## #**firewall-cmd --add-service=http --permanent** **#firewall-cmd --add-service=https --permanent** **#firewall-cmd --reload** |


# 7. Testing the Repository Server:

Using a web browser or curl, navigate to http\://\[your-server-ip]/8.7/ and you should see the directories for the repos you've synchronized. For example:

|                                          |
| ---------------------------------------- |
| ## #**curl http\://192.168.14.154/8.7/** |

\
\


Red Hat Satellite 6 Installation Preparation 


## Document Purpose:

This guide provides step-by-step instructions to prepare a server environment for the installation of Red Hat Satellite 6.


# 1. Preparing Your Environment for Installation

## 1.1. Host System Requirements

The server hosting Red Hat Satellite 6 must adhere to the following minimum specifications:

- CPU architecture: x86\_64

- CPU cores: Minimum of four, each at 2.0 GHz

- Physical memory: Minimum of 20 GB

- Swap space: Minimum of 4 GB


## 1.2. Security Configuration

For software deployment, configuration management, and provisioning, allow the following network traffic:

To configure the necessary network ports, run the following commands:

\


|                                                                                                                                                                                                                                                                                                                                                                                                            |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| \[root\@satellite \~]# **firewall-cmd --permanent \\** **--add-port="7/udp" --add-port="7/tcp" \\** **--add-port="53/udp" --add-port="53/tcp" \\****** **--add-port="67/udp" --add-port="68/udp" \\**  **--add-port="69/udp" --add-port="80/tcp" \\** **--add-port="443/tcp" --add-port="5646/tcp" \\** **--add-port="5671/tcp" --add-port="8000/tcp" \\** **--add-port="8140/tcp" --add-port="9090/tcp"** |

\
\


|                                                   |
| ------------------------------------------------- |
| \[root\@satellite \~]# **firewall-cmd --reload**  |

Ensure SELinux permissions are set to enforcing:

\


|                                       |
| ------------------------------------- |
| \[root\@satellite \~]# **getenforce** |

The output should display: Enforcing.

For accurate time synchronization, install and enable chronyd on the RHEL host:

\


|                                                     |
| --------------------------------------------------- |
| \[root\@satellite \~]# **systemctl status chronyd** |


# 1.3. Storage Configuration

The server requires:

- 6 GB for the base OS

- 2 GB for Red Hat Satellite 6 software (disconnected installations)

- 100 MB (up to 20 GB) for /var/lib/pgsql (PostgreSQL database)

- 1 MB (up to 300 GB) for /var/lib/pulp (synchronized content)

- 25 MB in /var/lib/qpidd per content host to be registered

Note: Red Hat recommends /var to be allocated on a separate LVM partition to efficiently manage storage.


# 2. Verifying DNS Resolution

## 2.1. Verification Procedure

Ensure that the host name and localhost resolve correctly:

|                                                        |
| ------------------------------------------------------ |
| # **ping -c1 localhost**# **ping -c1 \`hostname -f\`** |

The output should reflect successful name resolution.


# 2.2. Setting Hostnames

To ensure consistency in naming:

\


|                                                    |
| -------------------------------------------------- |
| # **hostnamectl set-hostname satellite.aiims.edu** |


# 2.3 Create partitions.

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **\[root\@satellite \~]# lsblk****NAME               MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT****loop0                7:0    0  11.3G  0 loop /media/rhel8****loop1                7:1    0 790.3M  0 loop /media/sat6****vda                252:0    0    10G  0 disk****├─vda1             252:1    0     1M  0 part****├─vda2             252:2    0   100M  0 part /boot/efi****└─vda3             252:3    0   9.9G  0 part /****vdb                252:16   0   600G  0 disk****├─os-var\_log       253:0    0    10G  0 lvm  /var/log****├─os-var\_lib\_pgsql 253:1    0    20G  0 lvm  /var/lib/pgsql****├─os-var\_lib\_pulp  253:2    0   350G  0 lvm  /var/lib/pulp****├─os-var\_lib\_qpidd 253:3    0    20G  0 lvm  /var/lib/qpidd****└─os-iso\_image     253:4    0    50G  0 lvm  /iso\_files** |


# 2.4 Create a local repo.

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **# mount -o loop /iso\_files/rhel-8.7-x86\_64-dvd.iso /media/rhel8/****# \[root\@satellite \~]# vim  /etc/yum.repos.d/rhel8.repo****\[RHEL8-BaseOS]****name=Red Hat Enterprise Linux BaseOS****mediaid=None****metadata\_expire=-1****gpgcheck=0****cost=500****baseurl=file:///media/rhel8/BaseOS/****\[RHEL8-AppStream]****name=Red Hat Enterprise Linux Appstream****mediaid=None****metadata\_expire=-1****gpgcheck=0****cost=500****baseurl=file:///media/rhel8/AppStream/** |


## **Satellite Server Installation Guide**

Objective:

This document outlines the steps required to install Satellite Server on a host within a disconnected environment by using an ISO image.

Introduction:

When deploying Satellite Server in a disconnected setting, one can leverage an external machine to procure an ISO image containing the requisite packages. This image can then be transferred to the target system, serving as the primary installation source for the Satellite Server. However, it's pertinent to note that relying on ISO images might pose a risk, as they might not always encompass the latest patches, features, and updates.

\



# Steps for Installing Satellite Server:

1. # Downloading the Binary DVD Images:

To procure the requisite ISO images for both Red Hat Enterprise Linux and Red Hat Satellite, follow the steps delineated below:

- Navigate to the Red Hat Customer Portal and initiate a login sequence.

- Once inside, select the DOWNLOADS tab.

- From the ensuing options, choose Red Hat Enterprise Linux.

- Ascertain that your selected product and its version align with your server's requirements. The following criteria should be met:

- Product Variant: Red Hat Enterprise Linux for x86\_64.

- Version: Opt for the latest minor iteration of the product intended for the base OS deployment.

- Architecture: Ensure it's configured for the 64-bit variant.

- Proceed to the Product Software tab and commence the download for the Binary DVD image tailored for the latest Red Hat Enterprise Linux for x86\_64.

- Navigate back to the DOWNLOADS tab, this time selecting Red Hat Satellite.

- As before, ensure the selected product and its version are congruent with your environmental needs:

- Product Variant: Red Hat Satellite.

- Version: Opt for the latest minor iteration of the product.

- Transition to the Product Software tab and trigger the download for the Binary DVD image, specific to the latest version of Red Hat Satellite.

- Once both ISOs have been fetched, transfer them to the /var/tmp directory on the Satellite base OS or any other convenient storage medium. For this, the following command can be utilized:

\# scp path\_to\_local\_ISO 

|                                                         |
| ------------------------------------------------------- |
| **#username\@target\_host:path\_to\_remote\_directory** |

2. # Configuring the Base Operating System with Offline Repositories in RHEL 8

In situations where the server is not connected to the internet, offline repositories prove invaluable. This section elucidates the procedure to set up offline repositories using the ISO images for Red Hat Enterprise Linux 8 and Red Hat Satellite.

Procedure:

Setting up the RHEL 8 Repository:


## A. Start by fashioning a directory, which will function as the mount point for the RHEL 8 ISO:

|                         |
| ----------------------- |
| **#mkdir /media/rhel8** |


## B. Proceed by mounting the RHEL 8 ISO to this mount point:

|                                                         |
| ------------------------------------------------------- |
| **#mount -o loop path\_to\_rhel8-DVD.iso /media/rhel8** |


## C. Replicate the repository data file from the ISO and modify its permissions:

|                                                                                                         |
| ------------------------------------------------------------------------------------------------------- |
| **# cp /media/rhel8/media.repo /etc/yum.repos.d/rhel8.repo****# chmod u+w /etc/yum.repos.d/rhel8.repo** |


## D. Edit the copied repository data file to add the baseurl directive. The content should resemble:

|                                                                                                                                                                                                                                                                                                                                                 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **\[RHEL8-BaseOS]****name=Red Hat Enterprise Linux BaseOS****mediaid=None****metadata\_expire=-1****gpgcheck=0****cost=500****baseurl=file:///media/rhel8/BaseOS/****\[RHEL8-AppStream]****name=Red Hat Enterprise Linux Appstream****mediaid=None****metadata\_expire=-1****gpgcheck=0****cost=500****baseurl=file:///media/rhel8/AppStream/** |


## E. Confirm that the repository is correctly set up:

|                    |
| ------------------ |
| **# yum repolist** |


## F. Setting up the Satellite Server Repository:

Create a new directory to act as the mount point for the Satellite Server ISO:

|                         |
| ----------------------- |
| **# mkdir /media/sat6** |


## **G.** Mount the Satellite ISO to this newly created directory:

|                                                        |
| ------------------------------------------------------ |
| **# mount -o loop path\_to\_sat6-DVD.iso /media/sat6** |

3. # Installing Satellite Packages from Offline Repositories

Installation Steps:

1. ## Verification of ISO Image Mounting:

Prior to proceeding with the installation, it's imperative to ensure the correct mounting of both ISO images, specifically for Red Hat Enterprise Linux Server and Red Hat Satellite.

Use the following command to validate:

\


|                          |
| ------------------------ |
| **# findmnt -t iso9660** |

2. ##  Importing Red Hat GPG Keys:

To validate the authenticity of the packages you're installing, you should import the GPG keys provided by Red Hat.

Execute the command:

\


|                                                                |
| -------------------------------------------------------------- |
| **# rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release** |

3. ##  Updating the Base Operating System:

Regularly updating the base OS ensures stability and security. Make use of the Binary DVD image for this purpose:

Issue the command:

\


|                  |
| ---------------- |
| **# dnf update** |

4. ## Accessing the Mounted Satellite ISO Directory:

Shift your active directory to the location where the Satellite ISO is mounted:

\


|                       |
| --------------------- |
| **# cd /media/sat6/** |

5. ## Initiating the Installation:

Commence the installation process of the Satellite packages by executing the script located within the mounted directory:

Run:

|                           |
| ------------------------- |
| **# ./install\_packages** |

If you have successfully installed the Satellite packages, the following message is displayed: Install is complete. Please run

**satellite-installer --scenario satellite.**

\



# 4. Synchronizing the System Clock with Chronyd

1. ## Installing the Chrony Package:

Kick-start the process by installing the required package for clock synchronization:

|                          |
| ------------------------ |
| **# dnf install chrony** |

2. ## Activating the Chronyd Service:

Enable and initiate the chronyd service to ensure time synchronization:

|                                      |
| ------------------------------------ |
| **# systemctl enable --now chronyd** |


# 5. Installing the SOS Package on the Base Operating System

Installation of the SOS Package:

Install the sos package to equip the system with diagnostic capabilities:

|                       |
| --------------------- |
| **# dnf install sos** |

\



# 6.Configuring Satellite Installation

Objective:

The initial configuration of the Satellite installation involves setting up an organization, location, user name, and password. This configuration lays down the foundational settings required for the smooth functioning of the Satellite Server.

Procedure:

1. ## Setting Up Initial Configuration:

Initiate the configuration with the following command, adjusting values as per your requirements:

\


|                                                                                                                                                                                                                                                                   |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **# satellite-installer --scenario satellite \\**  **--foreman-initial-organization "AIIMS" \\**  **--foreman-initial-location "New\_Delhi" \\**  **--foreman-initial-admin-username admin\_user\_name \\**  **--foreman-initial-admin-password admin\_password** |

****![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXdkAZfOQ2cdg1FzoZdQLNqyHtWYz19J90DnQiPpwRpLYZafq7pihyO5e3Armx-LMPV4NpVw6gHJ-YNWiJ-bMYD5fGoKhaQJM5PLMeinXhYQ7SkeNtydXBvYnQ7jaaEswqkYm4bxDujn6z4zhOcMSXilaCY?key=fZuo9F3liZUXUyi46TMKHg)****

Monitor the progress on the console while keeping an eye on logs at /var/log/foreman-installer/satellite.log.

2. ## Validate a Satellite Server Installation

You can view and query a Satellite Server to verify that it is successfully installed and operational.

Use the Satellite Server web UI and login with the credentials or the Hammer CLI to query the central Satellite Server.

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXcP-1NflNI6aasj8_ZGWP71VpFDTLpM1wPwf3ugPsKuQAUUb6Qi84JuZUGTakK81M1I0Fbboy7aGjGeXJfi_-ma8ypAc5OT05wi-TQ-PUm1rmB7JQ7jZyEAwekisvEqIuBN_wrOgQMRYPS0tRo0wOYaYHtu?key=fZuo9F3liZUXUyi46TMKHg)

\


3. ## Unmounting ISO Images:

Once the setup concludes, dismount the ISO images:

|                                                  |
| ------------------------------------------------ |
| **# umount /media/sat6****#umount /media/rhel8** |


# 7. Disabling Subscription Connection

**Objective:**

Ensure that the disconnected Satellite Server remains insulated from Red Hat Portal to avert unintended connections. This measure also bars the system from refreshing the manifest and updating upstream entitlements.


## Procedure:

1. ## Using the Satellite Web UI:

- Navigate to Administer > Settings.

- Click on the Content tab.

- Toggle the Subscription Connection Enabled value to No.

- Using CLI:

2. ## Execute the command below on the Satellite Server:

|                                                                                  |
| -------------------------------------------------------------------------------- |
| **# hammer settings set --name subscription\_connection\_enabled --value false** |

\


Satellite Additional Configuration


# Configuring Organizations and Locations in Red Hat Satellite 6

Manage Organizations:


## Create:

- Go to Administer > Organizations > New Organization.

- Enter name, unique label (no spaces), and optional description.


## Edit:

- Navigate to Administer > Organizations.

- Click the organization name or Edit in the Actions column.

- Adjust details in the categories.


## Delete:

- Navigate to Administer > Organizations.

- Select Delete next to desired organization.


## Manage Locations:

## Create:

- Go to Administer > Locations > New Location.

- Choose parent if it's a sub-location and enter a name.


## Edit:

- Navigate to Administer > Locations.

- Click location name or Edit in Actions column.

- Modify details as needed.


## Delete:

- Ensure location isn't linked to lifecycle environments or host groups.

- Go to Administer > Locations and select Delete.


# Managing Subscriptions and Content in Red Hat Satellite Server

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXeP07Cu4k9UAGuzUKICyxpAO5-3MYIBLQXZte24DD5VU-4zw5LVI-pwOexHzFU4Jj-egx3Pp-0a4fj3-9EaA9yeLOGd5wYv_H82rlDRobpP2y1RzfnAqqaecjq4bjq6YqNmSrAVSNAKnR1cyYfOK69I-N_L?key=fZuo9F3liZUXUyi46TMKHg)


## 1. Create a Subscription Manifest:

- Log into Red Hat Customer Portal.

- Navigate to Subscriptions > Subscription Allocations > Create New subscription allocation.

- Name the manifest and select the appropriate version, e.g., Satellite 6.13.1

- Simple Content Access (SCA): Optional feature to simplify entitlement tasks, can be enabled for each organization.

- To add subscriptions: Subscription Allocations > Click manifest name > Subscriptions > Add Subscriptions.

- Set the desired number of entitlements for each product.


## 2. Export a Subscription Manifest:

- Go to Subscription Allocations > Click the manifest name.

- From the Subscriptions or Details tab, click Export Manifest.

- This encodes the subscription certificates into a compressed file for upload to Satellite Server.


## 3. Import a Subscription Manifest to Satellite Server:

- Ensure Satellite Server can synchronize with Red Hat CDN.

- In the Satellite web UI, set the organization context for the manifest.

- Navigate to Content > Subscriptions > Manage Manifest.

- Set Red Hat CDN URL (default: https\://cdn.redhat.com). For disconnected Satellites, specify your local content ISO location.

- In Subscription Manifest, click Browse to find and import the downloaded manifest.


# ![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXeMATWDFSSDs_KMInW1tIVMr7Y9zbtWuSJhcoJSZf2AkuHPsbAa8SR_lV4qp8y_TpQVbqf_3xf8wyA_5naB-PsNhh7HWMng9wJrjoWOss2bygeGB4GIcKLMqOOfryCSE93t9NNrob3FBvLP8iuCPsImY_22?key=fZuo9F3liZUXUyi46TMKHg)

# ![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXcxvk6Hc6qkliDAYU5W5-1FO4Nc2veMZp7t4qbipTTda9UJSDFYK3Uz489mOD7gRX11jzmTZ9Thqb-sMy_GmukzeCsqylMgaEOgKGSyjgx1kbq2VzE1sCA5pCW2BH5WyLLtRuoYezzx8iKz3na_2n2q13o4?key=fZuo9F3liZUXUyi46TMKHg)

# Software Lifecycles in Satellite Server

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXdC4yxKfSmKa64JlF-b910Md6_WJ7Pb-PlIB7GayqXRnOQRyK8T8gEZ7AdxxHv6QmKioZ6dHcRQvKWaTbiIeOvDbgFL7AGpxpbk0EBuiaHHNLQjORPSuBi2BmodWzZJdwVLXMN11nt3jN6yN2X-jUu62ag_?key=fZuo9F3liZUXUyi46TMKHg)


## 1. Application Lifecycle:

- Represents stages during software development and usage.

- A simple life cycle: Development -> Production.

- More complex life cycle: Development -> Testing -> Beta -> Production.

- In Satellite, these stages are named "environments".

- Each managed host is assigned one lifecycle environment based on its role (developer system, testing system, production host).


## 2. Environment Paths:

- Manage software package and errata releases using lifecycle environments.

- Sequence of stages is called an environment path.

- Every path starts with a "Library" environment, which syncs content from sources.

- A host in the Library environment has immediate access to the latest content.

Additional environments use promoted content views to define available content.


## Steps to Create a Lifecycle Environment Path:

- Set the right organization and location context.

- Go to Content > Lifecycle Environments > Create Environment Path.

- Input Name (auto-generates Label) and Description.

- Click Save.

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXe4Dk8el7TJbjVsouqOWxeWTQ7rdEwxfimbL6NCSSwRA-hY_1ulr0_-va-YMBsROhNlu4HdQ_PApmOCsQLwCBYCwbg1_7f5AXfE2NbQPTofU0sHfwGDtH3UCjJv9r0jHe--VZKvxh9xFU8p53M_i0KpilOV?key=fZuo9F3liZUXUyi46TMKHg)


## Steps to Extend an Environment Path:

- Set the right organization and location context.

- Go to Lifecycle Environment Paths > Add New Environment.

- Input Name and Description, then choose a prior environment.


## To Remove a Lifecycle Environment:

- Navigate to Lifecycle Environment Paths.

- Click on the environment name you want to delete.

- Click Remove Environment.


# Publish and Promote Content Views in Satellite Server

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXcoEoQScC9QKA4waN62rW7Z72C5KAMAVqPbq_goRvoFGYrwwOIGbJYTvx2pjt4lH5OXZEhbUJqDF3snkwscPAL5zpHbXuNYlTYbaE8tuaCxgrWlVHARHOjzcLyjFtgv8zCvQ8OmaAHBB-XwWt3_rh5FBk9W?key=fZuo9F3liZUXUyi46TMKHg)


## 1. Content Views:

- Customized content repositories for specific environments.

- Can be filtered (e.g., package filters, errata filters).

- To Create: Navigate to Content > Content Views > Create New View. Input name, description, and save.

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXeSTRQ7pp6qf8JYi4Q9BPsXJ8zpOFwQykUUwkPsjO6onKgfy3XkVVyvIc5xTWM0TMCWVNXtK5-CjrGOOymY_ycSlmr16HY2ZDRRagDYY1sc4hhCKm7K3QKRTQvm2xMKAhA-L6p8W1xzVLArJPuuaebE_w4?key=fZuo9F3liZUXUyi46TMKHg)


## 2. Managing Repositories in Content Views:

Initially, a new content view is empty.


## To Add:

- Go to Content > Content Views > select the content view.

- Click the Repositories tab.

- Check desired repositories > Add Repositories.

\
\



## To Remove:

- In the Repositories tab, check the desired repository.

- Click the vertical ellipsis menu > Remove.

\



# Publishing and Promoting Content Views in Satellite Server

## **Introduction**:

Content Views in Satellite Server provide a mechanism to define and curate the software that a specific environment should use. This mechanism enhances consistency and reliability across different stages in your infrastructure.


## 1. Publishing a Content View:

Purpose: Making a content view available in the library helps in versioning and tracking changes.

Versioning: Every time you publish or modify a content view, a sequentially numbered version is generated, allowing for easy tracking and rollback if necessary.

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXfL-RcLT0TTG-2SIn9picA00izAh12EMpnou1d9DkZbyujBTTmZ8ESThAoPZksj0ug9qDSWYBePikbWs0EtUR3hHD5TKynmSzpl91zh2Eig7lXdchmwKMKi6fvwkNy_ageN-Ry26sn4GKCuFM3wZBXNmxM?key=fZuo9F3liZUXUyi46TMKHg)


## **Steps**:

- Navigate to Content > Content Views > select the desired content view.

- Implement desired updates (e.g., adding packages) and click Publish New Version.

- As the content version increments, it's advised to add a descriptive note for differentiation. Red Hat emphasizes the importance of a descriptive note to provide clarity on the differences between versions.

- After adding the description, click Next to review the changes. If satisfied, proceed by clicking Finish.


## 2. Promoting a Content View:

Purpose: Once the content view is published and ready, promoting it moves this version from the library to subsequent environments in the designated path. This allows for staging and incremental deployment.

Repository Management: For each environment, Satellite Server maintains separate repositories for each content view. When a content view gets promoted, associated repositories update to reflect the new content.


## Steps:

- Navigate to Content > Content Views > select the desired content view.

- In the Versions tab, find the published version you want to promote.

- Click on the vertical ellipsis menu at the end of the version row, then choose Promote.

- Add a detailed description to provide context on why this promotion is occurring.

* Finally, select the lifecycle environment to which you want to promote the content view, and click Promote.

\
\
\
\



# Managing Hosts with Host Collections in Red Hat Satellite 

Objective:

Organize registered hosts into host collections for concurrent management.

Host Collections Overview:

Host collections in Red Hat Satellite 6 allow grouping of content hosts with similar features. This aids in batch actions like package updates, errata installations, etc. Hosts can belong to multiple collections and can be grouped as per functions, department, or business units.

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXdC0KnLf7GQ2e946jvx3GAlUkJ68x516tO1EXSYDA03tTRPwilZco3WY47g3IoJYpj6W84ZiRIXBByrM1wIX-17xwR8IZ1mNzAwUEUspK64PS48S2NUhz19Fpb_uTJVz-21h8qFd1S74nMZAoj-3VmzcKRX?key=fZuo9F3liZUXUyi46TMKHg)

Steps to Manage Host Collections:

1. ## Creating a Host Collection:

- Go to Hosts > Host Collections.

- Click Create Host Collection.

- Provide a name and optional description.

- You have the option to limit the number of hosts in the collection by unchecking the Unlimited Hosts checkbox.


## ![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXd6YQ-FP5AjMiZsapZuj7rp7f3EJJo7bwQVi7CqOMJo4p4OaCVSF2JYZSf7Ft3hcw8YG-vr68oF5zB-eUlrUFrsr7r0LH1bCauSwi_8sFIgzmdBwr3p660a2Y8W8SMS3zWCmNB4L0x_uuLeuwQDItiKtANR?key=fZuo9F3liZUXUyi46TMKHg)

2. ## Managing Host Collection Membership:

- To add a host to a collection, it must first be registered with Satellite.

- Navigate to Hosts > Host Collections and select the desired host collection.

- In the Hosts tab, you can add or remove hosts.

3. ## Cloning a Host Collection:

- If you wish to replicate an existing collection, cloning can be useful.

- Select the host collection to clone from Hosts > Host Collections.

- From the Select Action list, choose Copy Host Collection and give the new collection a name.

4. ## Removing a Host Collection:

- Deletion of a host collection doesn't affect the member hosts' content or configuration. They just won't be part of that specific collection anymore.

- Navigate to Hosts > Host Collections and select the collection to delete.

- From the Select Action list, choose Remove. Confirm the deletion.

\



# Managing Custom Products and Repositories in Satellite Server 

\


Objective:

Create and manage custom repositories in Satellite Server for non-Red Hat content.

![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXdx2KvioxOJQl6HKJK9KYa4n-_FjQOw5To5r3ijp9V0eMryPgr9xgFao7vDAhy1BG7Imqu0r18FKTqLErhFNLDanliKADIVBPJnB5cTCijyKlid8Q07GUdi8w7e0b2h1lmxsdN65vFpo0RcM11J2N7Swvk?key=fZuo9F3liZUXUyi46TMKHg)


## 1. Creating Custom Products:

- Navigate to Content > Products and select Create Product.

- Fill in the Name and Description.

- The Label field auto-populates from the Name.

- Optionally, attach a GPG Key to validate the origin of the packages in the product's repository.


## 2. Creating Custom Repositories:

- After creating a product, head to Content > Products.

- Click on the desired product name.

- Under the Repositories tab, select New Repository.

- Fill out the Name, Description, and select the repository type from the Type list. Additional fields will be made available based on the repository type selected.

- For yum repositories, a specific GPG key can be selected that will override the product-level GPG key.


## Key Repository Parameters:

- Restrict to Architecture: Specifies repository architecture.

- Upstream URL: Determines the source URL for the content.

- Upstream Username & Password: Credentials for protected upstream repositories.

- Download Policy: Determines if the content downloads immediately or on-demand.

- Verify SSL: Verifies upstream repository's SSL certificates.

- Mirror on Sync: Removes packages that are no longer in the upstream repository.

- Publish via HTTP: Allows packages to be accessible via HTTP.


## 3. Adding Packages to Repositories:

- Navigate to Content > Products and click on the desired product.

- In the Repositories tab, click the desired repository name.

- In the Upload Package section, choose the packages to upload and select Upload.

- You can view the uploaded packages in the Content Counts section.


## 4. Removing Packages from Repositories:

- Navigate to the Packages page of your custom product repository.

- Choose the packages you wish to delete and click Remove Packages.

\



# Preparing and Registering a Content Host using the Consumer RPM Method

## Preparing the Host for Registration:

Before registering the host to Satellite Server, it's essential to prepare the system. Here's how:

1. ## Ensure Time Synchronization:

- It's critical for the Satellite Server and the host system to have synchronized time for successful interaction.

- Use the timedatectl command to check the current time settings.

\


|                                   |
| --------------------------------- |
| **\[root\@host \~]# timedatectl** |

\


- If you're using the chronyd service for synchronization, check its status with:

|                                           |
| ----------------------------------------- |
| **\[root\@host \~]# chronyc -n tracking** |

\


2. ## Update Essential Packages:

- Make sure the subscription-manager and yum packages are updated to the latest versions. It'll help avoid any conflicts or outdated registration protocols.

\


|                                                           |
| --------------------------------------------------------- |
| **\[root\@host \~]# yum update subscription-manager yum** |

3. ## Download the Consumer Certificate RPM:

- Satellite Server generates an RPM package, which contains signed certificates for establishing secure communication between the Satellite Server and the content host.

- Download this RPM using yum:

\


|                                                                                                                                                                                           |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **\[root\@host \~]# yum localinstall** [**http://satellite.aiims.edu/pub/katello-ca-consumer-latest.noarch.rpm**](http://satellite.example.com/pub/katello-ca-consumer-latest.noarch.rpm) |

\



# Registering the Host using the Consumer RPM Method

After preparing the host, you can register it to your Satellite Server.

1. ## Clean Old Registration Data:

- Before registering, ensure that there's no residual data from any previous registrations.

|                                                  |
| ------------------------------------------------ |
| **\[root\@host \~]# subscription-manager clean** |

2. ## Register to Satellite Server:

- Use the subscription-manager command to register the host to a specific organization on the Satellite Server. Remember to use the correct organization label.

\


|                                                                               |
| ----------------------------------------------------------------------------- |
| **\[root\@host \~]# subscription-manager register --org organization\_label** |

\


- During this process, the system might prompt you for authentication information, like a username and password. Provide the necessary credentials, typically for an admin user on the Satellite Server.

- Important Note: The --org option requires the organization's label, not its name.

3. ## Verifying Registration:

After registering, the host should have access to the repositories defined in the Satellite Server. It also becomes a managed host within the Satellite infrastructure, and its software lifecycle will now be under the purview of Satellite Server.

|                                                       |
| ----------------------------------------------------- |
| **\[root\@host \~]# yum repolistorganization\_label** |

\
\
\
\
\
\



# **#####Satellite Upgradation######**

**Upgradation from 6.11 to 6.12** 

**As per  document  rhel 7.9 is supported till 6.11 satellite server for 6.12 , we need to upgrade it to rhel 8.8** 

**Procedure:**

Step.1 - First we need to do the health checkup

Step.2 - Enable the Satellite Maintenance repository and the Satellite 6.12 repositories:

Step.3 - Red Hat Enterprise Linux 8 , manually enable the Satellite module:

Step.4 - Check the available versions to confirm the version you want is listed:

\


**Upgradation from 6.12 to 6.13**

**Procedure:**

Step.1 - First we need to do the health checkup

Step.2 - On a Satellite Server, Enable the Satellite Maintenance repository and the Satellite 6.13 repositories:

Step.3 - Red Hat Enterprise Linux 8, manually enable the Satellite module:

Step.4 - Check the available versions to confirm the version you want is listed:

